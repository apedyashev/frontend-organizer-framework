(function(){var c=[].slice,a={}.hasOwnProperty,b=function(g,e){for(var d in e){if(a.call(e,d)){g[d]=e[d]}}function f(){this.constructor=g}f.prototype=e.prototype;g.prototype=new f();g.__super__=e.prototype;return g};if(window.Rrs==null){window.Rrs={}}Rrs.Component=(function(){function d(e){this._elements=Rrs.Obj.extend(this._elements,this.elements);this._listeners=Rrs.Obj.extend(this._listeners,this.listeners);this._handlers=Rrs.Obj.extend(this._handlers,this.handlers);if((e!=null?e.elements:void 0)!=null){this._elements=Rrs.Obj.extend(this._elements,e.elements)}if((e!=null?e.listeners:void 0)!=null){this._listeners=Rrs.Obj.extend(this._listeners,e.listeners)}if((e!=null?e.handlers:void 0)!=null){this._handlers=Rrs.Obj.extend(this._handlers,e.handlers)}this.elements=this._elements;this.listeners=this._listeners;this.handlers=this._handlers}d.create=function(e){var f;f=Rrs.Obj.getClass(this);return new window[f](e)};d.prototype.init=function(e){if((e!=null?e.shared:void 0)!=null){this.shared=Rrs.Obj.extend(this.shared,e.shared)}this._initHandlers();return this._initListeners()};d.prototype.emit=function(f,e){var g;g=Rrs.Obj.getClass(this);return Rrs.Observer.instance().emit(g,f,e)};d.prototype._initHandlers=function(){var i,e,g,j,l,h,k,f;k=this._handlers;f=[];for(h in k){j=k[h];l=h.split(" ");e=l[0];g=l[1];if(l.length!==2){throw new Error(""+e+" has incorrect format. Selector name and event name must be splitted with single space")}i=this._elements[e];if(Rrs.Obj.isString(i)){i=jQuery(i)}else{if(Rrs.Obj.isJQeryObject(i)){i=jQuery(i.selector)}else{throw new Error(""+e+" must be either string selector or jQuery object")}}if(i.length>0){i.unbind(g);f.push(i.bind(g,(function(m){return function(n){return j.call(m,n)}})(this)))}else{f.push(Rrs.logger.error("Unable to bind "+g+" for "+e+" since "+e+" node does not exist in DOM"))}}return f};d.prototype._initListeners=function(){var i,f,h,g,e;g=this._listeners;e=[];for(f in g){i=g[f];h=f.split(":");if((h!=null)&&((h.length===1)||(h.length===2))){if(h.length===1){e.push(Rrs.Observer.instance().listen(null,h[0],i,this))}else{if(h.length===2){e.push(Rrs.Observer.instance().listen(h[0],h[1],i,this))}else{e.push(void 0)}}}else{e.push(Rrs.logger.error("Invalid listener format of name ("+f+"). Must be Namespace:signal"))}}return e};return d})();if(window.Rrs==null){window.Rrs={}}Rrs.logger={error:function(){return console.error.apply(console,arguments)},log:function(){return console.log.apply(console,arguments)},debug:function(){return console.debug.apply(console,arguments)}};if(window.Rrs==null){window.Rrs={}}Rrs.Observer=(function(){var d,f;d=null;f={};e.instance=function(){return d!=null?d:d=new Rrs.Observer};function e(){}e.prototype.emit=function(h,s,q){var i,r,o,n,t,g,p,m,k,j,l;r=""+h+":"+s;if(f[r]!=null){p=f[r];for(o=0,t=p.length;o<t;o++){i=p[o];Rrs.logger.debug("Emitting namespaced signal "+r+".",i);if((m=i.callback)!=null){m.call(i.context,q)}}}if(f[s]!=null){k=f[s];l=[];for(n=0,g=k.length;n<g;n++){i=k[n];Rrs.logger.debug("Emitting broadcast signal "+r+".",i);l.push((j=i.callback)!=null?j.call(i.context,q):void 0)}return l}};e.prototype.listen=function(i,g,k,h){var j;if(i){j=""+i+":"+g}else{j=g}if(h==null){throw new Error("Conext is not set for "+j)}if(k==null){throw new Error("Callback is not set for "+j)}Rrs.logger.debug("Attaching listener to "+j+" signal.",f);if(f[j]==null){f[j]=[]}return f[j].push({callback:k,context:h})};return e})();if(window.Rrs==null){window.Rrs={}}Rrs.PageModule=(function(){var d;d={};function e(f){var g,i,h;d=f;this._checkEnv();this._components=Rrs.Obj.extend(this._components,this.components);if((d!=null?d.components:void 0)!=null){this._components=Rrs.Obj.extend(this._components,d.components)}this._shared=Rrs.Obj.extend(this._shared,this.shared);if((d!=null?d.shared:void 0)!=null){this._shared=Rrs.Obj.extend(this._shared,d.shared)}h=this._components;for(i in h){g=h[i];if(g instanceof Rrs.Component){g.init({shared:this._shared})}else{Rrs.logger.error(""+(g.toString())+" is not an instance of Component")}}}e.create=function(f){var g;g=Rrs.Obj.getClass(this);return new window[g](f)};e.prototype._checkEnv=function(){if(Rrs.Component==null){throw new Error("Rrs.Component is not defined")}};return e})();if(window.Rrs==null){window.Rrs={}}Rrs.mixOf=function(){var k,i,j,e,d,f,h,g;i=arguments[0],d=2<=arguments.length?c.call(arguments,1):[];k=(function(l){b(m,l);function m(){return m.__super__.constructor.apply(this,arguments)}return m})(i);for(h=d.length-1;h>=0;h+=-1){e=d[h];g=e.prototype;for(f in g){j=g[f];k.prototype[f]=j}}return k};Rrs.Obj={getClass:function(f){var e,d;d=(typeof f).toLowerCase();if(d==="function"){e=/^function\s(\w+)/.exec(f)[1]}else{if(d==="object"){e=/(\w+)\(/.exec(f.constructor.toString())[1]}else{e=typeof f}}return e},extend:function(d,f){var e,g;if(d==null){d={}}if(f==null){f={}}for(e in f){g=f[e];d[e]=g}return d},isString:function(d){return(typeof d).toLowerCase()==="string"},isObject:function(d){return(typeof d).toLowerCase()==="object"},isFunction:function(d){return(typeof d).toLowerCase()==="function"},isJQeryObject:function(d){return d instanceof jQuery},uniqueId:function(d){var e;e=void 0;if(d==null){d=8}e="";while(e.length<d){e+=Math.random().toString(36).substr(2)}return e.substr(0,d)}}}).call(this);